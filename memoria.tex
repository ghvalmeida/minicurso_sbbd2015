\section{Bancos de dados em memória}
\label{sec:memoria}

Sistemas de banco de dados em memória são aqueles em que a fonte primária dos dados reside 
em memória principal (RAM). Esses dados têm, usualmente, cópia em disco, para eventuais falhas 
no hardware ou simplesmente falta de energia. Embora os sistemas de bancos de dados tradicionais 
também mantenham dados em memória na forma de \textit{cache}, a principal diferença é 
que, nos bancos de dados em memória, a fonte de dado primária (ou principal) está 
armazenada na memória RAM, enquanto nos tradicionais, está armazenada em disco 
\cite{garcia1992main, dewitt1984implementation}.

Esse tipo de tecnologia ganhou força nos últimos anos devido aos avanços nas arquiteturas de 
hardware que, atualmente, permitem sistemas com Terabytes de memória RAM compartilhada entre 
vários processadores. Além disso, houve um barateamento no custo desses equipamentos, o 
que tornou viável os sistemas de banco de dados em memória. 

Como o acesso à memória principal chega a ser cerca de 1.000 vezes mais rápido que os discos modernos 
como SSD (disco de estado sólido), esse tipo de tecnologia é bem convidativo. O leitor mais atento 
pode se perguntar: e se um sistema de banco de dados tradicional tiver um \textit{cache} grande o 
suficiente para caber todo o volume de dados, qual seria a diferença? Ainda assim, os sistemas tradicionais são 
projetados de forma não ótima para uso da memória, pois há ainda a indireção do \textit{cache}. 
Por exemplo, será necessário consultar um gerenciador do \textit{cache} toda vez que for acessar o dado;
outro exemplo são as estruturas dos índices, que estão em estruturas onde o acesso não é imediato Árvores B+. 

Embora existam hardwares especializados com memória não volátil, fontes de energia redundantes e 
outros mecanismos para minimizar falhas no hardware, ainda é virtualmente impossível garantir que o 
dado em memória principal esteja seguro. Por isso, uma questão muito importante para bancos de dados 
em memória é a recuperação de falhas. A estratégia tipicamente utilizada 
é persistir em disco cada uma das transações em um \textit{log}. Uma transação só é concluída após a 
escrita da mesma no disco (\textit{log}). De tempos em tempos, são criados \textit{checkpoints}, onde 
uma cópia da memória principal é realizada em disco, podendo assim, descartar os \textit{logs} de transações 
anteriores ao \textit{checkpoint}. A frequência da criação desses \textit{checkpoints} depende da 
confiabilidade do hardware e da volatilidade dos dados.

Outras questões importantes do projeto de sistemas de bancos de dados em memória, como controle de concorrência, processamento de transações, organização dos dados, métodos de acesso, processamento de consultas, desempenho e clusterização são discutidos em mais detalhes por Garcia-Molina e Salem \cite{garcia1992main}.

Atualmente, praticamente todos os grandes fornecedores de soluções tradicionais de bancos de dados 
relacionais também possuem versões em memória de seus produtos, como a Microsoft, Oracle e IBM, mas 
também há fornecedores especializados nesse tipo de solução, sendo os principais comerciais o SAP HANA
e o VoltDB, e o MemSQL de código aberto. Alguns desses produtos também possuem 
características de bancos de dados colunares apresentados na seção \ref{sec:colunar}, principalmente com o objetivo 
de atingir boa compressão dos dados e melhor utilização da memória.





